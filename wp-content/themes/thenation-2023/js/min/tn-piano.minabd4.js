function tnPianoSetCustomVariableCookie(e,a,s){if(0!==s){var i=new Date;i.setTime(i.getTime()+3600*s*24e3);var n="expires="+i.toUTCString()}else n=0;document.cookie="_pc_"+e+"="+JSON.stringify(a)+";"+n+";path=/"}function tnPianoReadCustomVariableCookie(e){var a;try{var s=document.cookie.match(RegExp("(^| )_pc_=([^;]+)"));s&&(a=JSON.parse(s[2]))}catch(i){a={}}return a||(a={}),void 0!==e?void 0!==a[e]?a[e]:null:a}function tnSendPostMessageToPiano(e,a,s,i){var n=jQuery("#"+e);n.length&&n[0].contentWindow.postMessage({piano:{success:a,message:s,object:i}},"*")}function tnPianoValidEmailAddress(e){return RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e)}var tp_html=$("html"),tp_body=$("body");tp.push(["addHandler","customEvent",function(e,a,s,i){switch(null!=e.eventName&&""!=e.eventName&&dataLayer.push({event:"gaPaywallEvent",gaEventCategory:"piano-clicks",gaEventAction:"piano-"+e.eventName,gaEventLabel:document.URL}),e.eventName){case"email-signup-C-60":case"email-signup-non-subsriber":case"email-signup-subscriber":case"meerkat-signup-non-subsriber":case"meerkat-signup-non-subsriber-live-debate":case"meerkat-signup-subscriber":case"meerkat-signup-subscriber-live-debate":case"meerkat-signup-non-subsriber-A":case"meerkat-signup-non-subsriber-B":case"meerkat-signup-subscriber-A":case"meerkat-signup-subscriber-B":var n,t,r,l,u,c,p="";n=(o=JSON.parse(e.params.params)).iframeId,void 0!==e.params.email&&e.params.email.length>0&&(p=e.params.email,$.ajax({type:"POST",data:{action:"tp_paywall_donate_email_vf",email:p},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){"object"==typeof e&&("success"==e.status?(tnPianoSetCustomVariableCookie("email_submitted",!0,28),tp.reload(),tp_body.removeClass("tp-modal-close")):"fail"==e.status&&tnSendPostMessageToPiano(n,!1,e.msg,null))}}));break;case"books-n-arts-meerkat-signup-subscriber-A":case"books-n-arts-meerkat-signup-non-subsriber-A":p="",n=(o=JSON.parse(e.params.params)).iframeId,void 0!==e.params.email&&e.params.email.length>0&&(p=e.params.email,$.ajax({type:"POST",data:{action:"tp_paywall_donate_email_books_and_arts",email:p},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){"object"==typeof e&&("success"==e.status?(tnPianoSetCustomVariableCookie("email_submitted",!0,28),tp.reload(),tp_body.removeClass("tp-modal-close")):"fail"==e.status&&tnSendPostMessageToPiano(n,!1,e.msg,null))}}));break;case"meerkat-spotify-click-non-subsriber-A":case"meerkat-spotify-click-non-subsriber-B":case"meerkat-itune-click-non-subsriber-A":case"meerkat-itune-click-non-subsriber-B":case"meerkat-google-click-non-subsriber-A":case"meerkat-google-click-non-subsriber-B":case"meerkat-itune-click-subscriber-A":case"meerkat-itune-click-subscriber-B":case"meerkat-spotify-click-subscriber-A":case"meerkat-spotify-click-subscriber-B":case"meerkat-google-click-subscriber-A":case"meerkat-google-click-subscriber-B":case"email-step-3-itune-click-C-60":case"email-step-3-spotify-click-C-60":case"email-step-3-google-click-C-60":case"email-step-3-itune-click-non-subsriber":case"email-step-3-spotify-click-non-subsriber":case"email-step-3-google-click-non-subsriber":case"email-step-3-itune-click-subscriber":case"email-step-3-spotify-click-subscriber":case"email-step-3-google-click-subscriber":case"meerkat-itune-click-non-subsriber":case"meerkat-itune-click-non-subsriber-live-debate":case"meerkat-itune-click-subscriber-live-debate":case"meerkat-spotify-click-non-subsriber":case"meerkat-spotify-click-non-subsriber-live-debate":case"meerkat-spotify-click-subscriber-live-debate":case"meerkat-google-click-non-subsriber":case"meerkat-google-click-non-subsriber-live-debate":case"meerkat-google-click-subscriber-live-debate":case"meerkat-itune-click-subscriber":case"meerkat-spotify-click-subscriber":case"meerkat-google-click-subscriber":null===($cookieexists=tnPianoReadCustomVariableCookie("email_submitted"))&&(tnPianoSetCustomVariableCookie("email_submitted",!0,28),tp.reload());break;case"meerkat-step-2-subscribe-click-iframe-60":case"meerkat-step-5-subscribe-click-iframe-60":case"meerkat-step-2-subscribe-click-iframe-non-subscriber":case"meerkat-step-5-subscribe-click-iframe-non-subscriber":case"meerkat-step-2-subscribe-click-iframe-subscriber":case"meerkat-step-5-subscribe-click-iframe-subscriber":case"subscribe-click-subscribe-popup-iframe-non-subscriber":case"subscribe-click-subscribe-popup-iframe-subscriber":case"subscribe-click-subscribe-popup-iframe-60":"undefined"!=typeof thenation_globals&&""!=thenation_globals.tn_paywall_sfgiframe&&(""==jQuery("#sfgIframe").attr("src")&&jQuery("#sfgIframe").attr("src",thenation_globals.tn_paywall_sfgiframe),jQuery(".tn-show-sfg-subs-popup").toggleClass("hide"),jQuery("body").css({overflow:"hidden"}));break;case"exit-popup-signup-confirm":n=(o=JSON.parse(e.params.params)).iframeId,0==o.firstname.length&&0==o.email.length&&0==o.captcha.length?tnSendPostMessageToPiano(n,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(o.email)?$.ajax({type:"POST",data:{action:"exit_popup_signup_confirm",email:o.email,firstname:o.firstname},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("exit_popup_signup_confirm",!0,3650),tnSendPostMessageToPiano(n,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(n,!1,"We encountered an issue in subscribing. Please try again.",null)}}):tnSendPostMessageToPiano(n,!1,"Please Enter Valid Email Address(*).",null);break;case"exit-popup-close":tnPianoSetCustomVariableCookie("exit_popup_signup_confirm",!0,7),tp_html.removeClass("tp-piano-popup"),tp.offer.close();break;case"exit-popup-close-success":case"archive-email-signup-already-registered-EX14WRFSYXS8":tp_html.removeClass("tp-piano-popup"),tp.offer.close();break;case"exit-popup-already-signup":tnPianoSetCustomVariableCookie("exit_popup_signup_confirm",!0,3650),tp_html.removeClass("tp-piano-popup"),tp.offer.close();break;case"travel-exit-popup-signup-confirm":n=(o=JSON.parse(e.params.params)).iframeId,0==o.firstname.length&&0==o.email.length&&0==o.captcha.length?tnSendPostMessageToPiano(n,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(o.email)?$.ajax({type:"POST",data:{action:"travel_exit_popup",email:o.email,firstname:o.firstname},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("travel_exit_popup",!0,30),tnSendPostMessageToPiano(n,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(n,!1,"We encountered an issue in subscribing. Please try again.",null)}}):tnSendPostMessageToPiano(n,!1,"Please Enter Valid Email Address(*).",null);break;case"travel-exit-popup-already-signup":case"travel-exit-popup-close":tnPianoSetCustomVariableCookie("travel_exit_popup",!0,30),tp_html.removeClass("tp-piano-popup"),tp.offer.close();break;case"donate-footer-close":case"donate-footer-close-A":case"donate-footer-close-B":case"donate-footer-close-EXJSPCEFOLC9":case"donate-footer-close-EXB0RHWALOIG":case"donate-footer-close-EXRWSYFNFQ6H":case"donate-footer-close-EXCWTWZBPNKH":tnPianoSetCustomVariableCookie("donation_footer",!0,0);break;case"donate-footer-donate-now-click":case"donate-footer-donate-now-click-A":case"donate-footer-donate-now-click-B":case"donate-footer-donate-now-click-EXJSPCEFOLC9":case"donate-footer-donate-now-click-EXB0RHWALOIG":case"donate-footer-donate-now-click-EXRWSYFNFQ6H":case"donate-footer-donate-now-click-EXCWTWZBPNKH":tnPianoSetCustomVariableCookie("donation_footer",!0,90);break;case"live-chat-exit-popup-signup-confirm":n=(o=JSON.parse(e.params.params)).iframeId,0==o.firstname.length&&0==o.email.length&&0==o.captcha.length?tnSendPostMessageToPiano(n,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(o.email)?$.ajax({type:"POST",data:{action:"live_chat_exit_popup_signup_confirm",email:o.email,firstname:o.firstname},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("live_chat_exit_popup_signup_confirm",!0,3650),tnSendPostMessageToPiano(n,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(n,!1,"We encountered an issue signing you up. Please try again.",null)}}):tnSendPostMessageToPiano(n,!1,"Please Enter Valid Email Address(*).",null);break;case"travel-get-update-signup-confirm":n=(o=JSON.parse(e.params.params)).iframeId,0==o.firstname.length&&0==o.email.length?tnSendPostMessageToPiano(n,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(o.email)?$.ajax({type:"POST",data:{action:"travel_get_update_signup_confirm",email:o.email,firstname:o.firstname,weekly:o.weekly,dedicateds:o.dedicateds},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?tnSendPostMessageToPiano(n,!0,"Thanks for subscribe! Please verify email.",null):0==e&&tnSendPostMessageToPiano(n,!1,"We encountered an issue in subscribing. Please try again.",null)}}):tnSendPostMessageToPiano(n,!1,"Please Enter Valid Email Address(*).",null);break;case"live-chat-exit-popup-close":tnPianoSetCustomVariableCookie("live_chat_exit_popup_signup_confirm",!0,28);break;case"DNC-live-chat-exit-popup-signup-confirm":n=(o=JSON.parse(e.params.params)).iframeId,0==o.firstname.length&&0==o.email.length&&0==o.captcha.length?tnSendPostMessageToPiano(n,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(o.email)?$.ajax({type:"POST",data:{action:"live_chat_exit_popup_signup_confirm",email:o.email,firstname:o.firstname},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("DNC_live_chat_exit_popup_signup_confirm",!0,3650),tnSendPostMessageToPiano(n,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(n,!1,"We encountered an issue signing you up. Please try again.",null)}}):tnSendPostMessageToPiano(n,!1,"Please Enter Valid Email Address(*).",null);break;case"books-n-arts-exit-popup-signup-confirm-EX9WDU7QMKV3":n=(o=JSON.parse(e.params.params)).iframeId,0==o.email.length&&0==o.captcha.length?tnSendPostMessageToPiano(n,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(o.email)?$.ajax({type:"POST",data:{action:"bna_exit_popup_signup_confirm",email:o.email},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("bna_exit_popup_signup_confirm",!0,3650),tnSendPostMessageToPiano(n,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(n,!1,"We encountered an issue in subscribing. Please try again.",null)}}):tnSendPostMessageToPiano(n,!1,"Please Enter Valid Email Address(*).",null);break;case"books-n-arts-exit-popup-close-EX9WDU7QMKV3":case"books-n-arts-exit-popup-close-EXUT7ZLIFJOY":tnPianoSetCustomVariableCookie("bna_exit_popup_signup_confirm",!0,7),tp_html.removeClass("tp-piano-popup"),tp.offer.close();break;case"books-n-arts-exit-popup-already-signup-EX9WDU7QMKV3":case"books-n-arts-exit-popup-already-signup-EXUT7ZLIFJOY":tnPianoSetCustomVariableCookie("bna_exit_popup_signup_confirm",!0,3650),tp_html.removeClass("tp-piano-popup"),tp.offer.close();break;case"books-n-arts-exit-popup-signup-confirm-EXUT7ZLIFJOY":n=(o=JSON.parse(e.params.params)).iframeId,0==o.email.length&&0==o.captcha.length?tnSendPostMessageToPiano(n,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(o.email)?$.ajax({type:"POST",data:{action:"bna_exit_popup_signup_confirm_new",email:o.email},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("bna_exit_popup_signup_confirm",!0,3650),tnSendPostMessageToPiano(n,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(n,!1,"We encountered an issue in subscribing. Please try again.",null)}}):tnSendPostMessageToPiano(n,!1,"Please Enter Valid Email Address(*).",null);break;case"repro-exit-popup-signup-confirm-EXNL1HUQJT30":n=(o=JSON.parse(e.params.params)).iframeId,0==o.email.length&&0==o.captcha.length?tnSendPostMessageToPiano(n,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(o.email)?$.ajax({type:"POST",data:{action:"repro_exit_popup_signup_confirm",email:o.email},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("repro_exit_popup_signup_confirm",!0,3650),tnSendPostMessageToPiano(n,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(n,!1,"We encountered an issue in subscribing. Please try again.",null)}}):tnSendPostMessageToPiano(n,!1,"Please Enter Valid Email Address(*).",null);break;case"repro-exit-popup-close-EXNL1HUQJT30":tnPianoSetCustomVariableCookie("repro_exit_popup_signup_confirm",!0,7),tp_html.removeClass("tp-piano-popup"),tp.offer.close();break;case"repro-exit-popup-already-signup-EXNL1HUQJT30":tnPianoSetCustomVariableCookie("repro_exit_popup_signup_confirm",!0,3650),tp_html.removeClass("tp-piano-popup"),tp.offer.close();break;case"new_climate-exit-popup-signup-confirm-EX7BNAQH9RBD":t=(r=JSON.parse(e.params.params)).iframeId,console.log("params",r),0==r.email.length&&0==r.captcha.length?tnSendPostMessageToPiano(t,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(r.email)?$.ajax({type:"POST",data:{action:"new_climate-exit-popup-signup-confirm",email:r.email},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("new_climate_exit_popup_signup_confirm",!0,3650),tnSendPostMessageToPiano(t,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(t,!1,"We encountered an issue in subscribing. Please try again.",null)}}):tnSendPostMessageToPiano(t,!1,"Please Enter Valid Email Address(*).",null);break;case"new_climate-exit-popup-close-EX7BNAQH9RBD":tnPianoSetCustomVariableCookie("new_climate_exit_popup_signup_confirm",!0,28);break;case"new_climate-exit-popup-already-signup-EX7BNAQH9RBD":tnPianoSetCustomVariableCookie("new_climate_exit_popup_signup_confirm",!0,3650);break;case"archive-email-signup-EX14WRFSYXS8":console.log("archive-email"),l=(r=JSON.parse(e.params.params)).iframeId,0==r.email.length&&0==r.captcha.length?tnSendPostMessageToPiano(l,!1,"All fields are mandatory.",null):0==r.email.length?tnSendPostMessageToPiano(l,!1,"Please enter email.",null):tnPianoValidEmailAddress(r.email)?0==r.captcha.length?tnSendPostMessageToPiano(l,!1,"Please try again.",null):$.ajax({type:"POST",data:{action:"archive_email_signup",email:r.email},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){"object"==typeof e&&("success"==e.status?(tnSendPostMessageToPiano(l,!0,e.msg,null),tnPianoSetCustomVariableCookie("archive_email_signup",!0,3650),tp_html.removeClass("tp-piano-popup")):"fail"==e.status&&("duplicate_email"==e.msg&&tnPianoSetCustomVariableCookie("archive_email_signup",!0,30),tnSendPostMessageToPiano(l,!1,e.msg,null)))}}):tnSendPostMessageToPiano(l,!1,"Please Enter Valid Email Address(*).",null);break;case"sticker-subscribe-popup-signup-confirm-EX0ZGQIOC19Z":u=(params=JSON.parse(e.params.params)).iframeId,console.log("params",params),0==params.name.length||0==params.email.length||0==params.address.length||0==params.city.length||0==params.state.length||0==params.zip.length||0==params.captcha.length?tnSendPostMessageToPiano(u,!1,"All fields are mandatory(*).",null):tnPianoValidEmailAddress(params.email)?$.ajax({type:"POST",data:{action:"sticker-subscribe-popup",email:params.email,firstname:params.name,address:params.address,city:params.city,state:params.state,zip:params.zip,weekly:params.weekly},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){1==e?(tnPianoSetCustomVariableCookie("sticker-subscribe-confirm",!0,3650),tnSendPostMessageToPiano(u,!0,"Thanks for subscribe! Please verify email.",null)):0==e&&tnSendPostMessageToPiano(u,!1,"We encountered an issue in subscribing. Please try again.",null)}}):tnSendPostMessageToPiano(u,!1,"Please Enter Valid Email Address(*).",null);break;case"modal-registration-opt-in":c=(r=JSON.parse(e.params.params)).iframeId,0==r.email.length?tnSendPostMessageToPiano(c,!1,"Please enter email.",null):tnPianoValidEmailAddress(r.email)?$.ajax({type:"POST",data:{action:"registration_meerkat_register_user_opt-in",email:r.email},url:ajax_object.ajax_url,dataType:"JSON",success:function(e){console.log(e),"object"==typeof e&&"success"==e.status?tnSendPostMessageToPiano(c,!0,"Please check your email.",null):"object"==typeof e&&"fail"==e.status&&tnSendPostMessageToPiano(c,!1,e.msg,null)}}):tnSendPostMessageToPiano(c,!1,"Please Enter Valid Email Address(*).",null)}},]);