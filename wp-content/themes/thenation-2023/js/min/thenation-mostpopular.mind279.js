class ThenationMostPopular{constructor(){this.protocol=location.protocol,this.hostname=window.location.hostname,this.jsonPath="/wp-content/uploads/thenation/mostpopular/tnmostpopularpages.json",this.url=location.protocol.concat("//").concat(this.hostname).concat(this.jsonPath)}getMostPopularDataJson(t){let o=[],a=this.hostname;$.ajaxSetup({cache:!1}),$.getJSON(this.url,function(n){n.pages.forEach(function(n,e){let l=null;l=1<n.authors.length?n.authors.join(","):n.authors[0],o.push({host:a,path:n.path,title:n.title,authors:l}),0<o.length?t(o):console.warn("Unable to render Mostpopular.")})})}getThenationMostPopular(t){this.getMostPopularDataJson(function(o){if(void 0!==o&&0<o.length){let a="";a+='<div class="list__header">',a+="<h6>Most Popular</h6>",a+="</div>",a+='<ul class="unstyled">',o.forEach(function(t,o){a+="<li>",a+='<a href="//'+t.host+t.path+'"><h4 class="rank">'+(o+1)+"</h4><h3>"+t.title+"</h3></a>",a+="</li>"}),a+="</ul>",t.html(a)}})}getSingleArticleMostPopular(t){this.getMostPopularDataJson(function(o){if(void 0!==o&&0<o.length){let a="";a+="<h3>Popular</h3>",o.forEach(function(t,o){if(o<4){a+='<div class="popular-article">',a+='<h4 class="rank">'+(o+1)+"</h4>",a+='<h5><a href="//'+t.host+t.path+"\" onclick=\"ga('send', 'event', 'Most Popular', 'Click Most Popular', '"+t.title+"','0')\">"+t.title+"</a></h5>",a+="</div>"}}),t.html(a)}})}getMostPopularHomeLanding(t){this.getMostPopularDataJson(function(o){if(void 0!==o&&0<o.length){let a="";a+='<h2 class="section-title">',a+="<span>Most Popular</span>",a+="</h2>",o.forEach(function(t,o){a+='<div class="story">',a+="<h5>"+(o+1)+"</h5>",a+='<h3><a href="//'+t.host+t.path+'">'+t.title+"</a></h3>",a+='<a class="author" href="javascript:void(0)" aria-label="'+chartAuthorName(t.authors)+'"style="cursor: default;color: #a39e98 !important;">'+chartAuthorName(t.authors)+"</a>",a+="</div>"}),t.html(a)}})}}let thenationmp=new ThenationMostPopular;function chartAuthorName(t){let o="",a=t.split(",");if(a.length>1){let t=a[a.length-1];a.pop(),o+=a.join(", "),"the nation"==t.toLowerCase()?o+=" for "+t:o+=" and "+t}else o+=a[0];return o}0<jQuery("#thenation-most-popular").length&&thenationmp.getThenationMostPopular(jQuery("#thenation-most-popular")),0<jQuery("#thenation-home-landing-most-popular").length&&thenationmp.getMostPopularHomeLanding(jQuery("#thenation-home-landing-most-popular"));